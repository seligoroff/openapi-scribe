# OpenAPI Scribe üñãÔ∏è

–£—Ç–∏–ª–∏—Ç–∞ –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å OpenAPI —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏—è–º–∏: –∏–∑–≤–ª–µ—á–µ–Ω–∏–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏, –≥–µ–Ω–µ—Ä–∞—Ü–∏—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏ –∏ –∞–Ω–∞–ª–∏–∑ —Å—Ö–µ–º

## –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏ ‚ú®

- –ü–æ–∏—Å–∫ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –ø–æ —ç–Ω–¥–ø–æ–∏–Ω—Ç–∞–º –∏ —Å—Ö–µ–º–∞–º –¥–∞–Ω–Ω—ã—Ö
- –ì–µ–Ω–µ—Ä–∞—Ü–∏—è Markdown –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏
- –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è —ç–Ω–¥–ø–æ–∏–Ω—Ç–æ–≤
- –ü–æ–¥–¥–µ—Ä–∂–∫–∞ —Ä–µ–∫—É—Ä—Å–∏–≤–Ω–æ–≥–æ –≤—ã–≤–æ–¥–∞ –∑–∞–≤–∏—Å–∏–º—ã—Ö —Å—Ö–µ–º
- –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–∏–º–µ—Ä–æ–≤ –∏ —Ç–∞–±–ª–∏—Ü –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤
- –û–±—Ä–∞–±–æ—Ç–∫–∞ `$ref` –∏ –∫–æ–º–±–∏–Ω–∞—Ç–æ—Ä–æ–≤ —Å—Ö–µ–º (anyOf/oneOf/allOf)

## –£—Å—Ç–∞–Ω–æ–≤–∫–∞ ‚öôÔ∏è

1. –ö–ª–æ–Ω–∏—Ä—É–π—Ç–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π:

```bash
git clone git@gitlab.fc-zenit.ru:zenit/oascribe.git
cd oascribe

```
2. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:

```bash

pip install -r requirements.txt

```
## –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ üöÄ

### –û—Å–Ω–æ–≤–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã

```bash 
python oascribe.py [COMMAND] [OPTIONS]

```

| –ö–æ–º–∞–Ω–¥–∞ |	–û–ø–∏—Å–∞–Ω–∏–µ |
|---------|----------|
|endpoint|	–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–º —ç–Ω–¥–ø–æ–∏–Ω—Ç–µ|
|schema|	–ü–æ–∏—Å–∫ —Å—Ö–µ–º—ã –¥–∞–Ω–Ω—ã—Ö –ø–æ –∏–º–µ–Ω–∏|
|list|	–°–ø–∏—Å–æ–∫ –≤—Å–µ—Ö —ç–Ω–¥–ø–æ–∏–Ω—Ç–æ–≤ API|
|generate-md|	–ì–µ–Ω–µ—Ä–∞—Ü–∏—è Markdown –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏|

#### 1. –ü–æ–∏—Å–∫ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ–± —ç–Ω–¥–ø–æ–∏–Ω—Ç–µ

```bash
python oascribe.py endpoint \
  -s path/to/openapi.json \
  -p /api/v1/users \
  -m get

```  

**–û–ø—Ü–∏–∏:**

- --spec/-s: –ü—É—Ç—å –∫ OpenAPI —Ñ–∞–π–ª—É (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ)

- --path/-p: –ü—É—Ç—å —ç–Ω–¥–ø–æ–∏–Ω—Ç–∞ (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ)

- --method/-m: HTTP –º–µ—Ç–æ–¥ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é: get)

- --expand-schemas: –†–µ–∫—É—Ä—Å–∏–≤–Ω—ã–π –≤—ã–≤–æ–¥ —Å–≤—è–∑–∞–Ω–Ω—ã—Ö —Å—Ö–µ–º

#### 2. –ü–æ–∏—Å–∫ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ —Å—Ö–µ–º–µ

```bash
python oascribe.py schema \
  -s path/to/openapi.json \
  -n UserSchema

```

**–û–ø—Ü–∏–∏:**

- --spec/-s: –ü—É—Ç—å –∫ OpenAPI —Ñ–∞–π–ª—É (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ)

- --name/-n: –ò–º—è —Å—Ö–µ–º—ã (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ)

#### 3. –°–ø–∏—Å–æ–∫ –≤—Å–µ—Ö —ç–Ω–¥–ø–æ–∏–Ω—Ç–æ–≤

```bash
python oascribe.py list \
  -s path/to/openapi.json \
  -o endpoints.txt

```

**–û–ø—Ü–∏–∏:**

- --spec/-s: –ü—É—Ç—å –∫ OpenAPI —Ñ–∞–π–ª—É (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ)

- --output/-o: –§–∞–π–ª –¥–ª—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

#### 4. –ì–µ–Ω–µ—Ä–∞—Ü–∏—è Markdown –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏

```bash

python oascribe.py generate-md \
  -s path/to/openapi.json \
  -e endpoints.txt \
  -o documentation.md \
  --all-schemas

  ```
  **–û–ø—Ü–∏–∏:**

  - --spec/-s: –ü—É—Ç—å –∫ OpenAPI —Ñ–∞–π–ª—É (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ)

- --endpoints/-e: –§–∏–ª—å—Ç—Ä —ç–Ω–¥–ø–æ–∏–Ω—Ç–æ–≤ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

- --output/-o: –§–∞–π–ª –≤—ã–≤–æ–¥–∞ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

- --all-schemas: –í–∫–ª—é—á–∏—Ç—å –≤—Å–µ —Å—Ö–µ–º—ã (–Ω–µ —Ç–æ–ª—å–∫–æ –∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ)

### –ü—Ä–∏–º–µ—Ä—ã —Ä–∞–±–æ—Ç—ã üìù

#### –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è —ç–Ω–¥–ø–æ–∏–Ω—Ç–æ–≤

–§–∞–π–ª endpoints.txt:

```bash 
GET /api/v1/users
POST /api/v1/posts

```

–ì–µ–Ω–µ—Ä–∞—Ü–∏—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏ —Ç–æ–ª—å–∫–æ –¥–ª—è —É–∫–∞–∑–∞–Ω–Ω—ã—Ö —ç–Ω–¥–ø–æ–∏–Ω—Ç–æ–≤:

```bash

python oascribe.py generate-md \
  -s spec/openapi.json \
  -e endpoints.txt \
  -o filtered_docs.md

```

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞ üìÇ

```bash

.
‚îú‚îÄ‚îÄ oascribe.py # –û—Å–Ω–æ–≤–Ω–æ–π CLI-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å
‚îú‚îÄ‚îÄ README.md   # –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
‚îú‚îÄ‚îÄ requirements.txt # –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
‚îî‚îÄ‚îÄ oatools       # –ü–∞–∫–µ—Ç —Å –º–æ–¥—É–ª—è–º–∏ —É—Ç–∏–ª–∏—Ç
    ‚îú‚îÄ‚îÄ __init__.py # –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø–∞–∫–µ—Ç–∞ oatools
    ‚îú‚îÄ‚îÄ markdown_generator.py   # –ì–µ–Ω–µ—Ä–∞—Ç–æ—Ä Markdown
    ‚îî‚îÄ‚îÄ utils.py    # –í—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã–µ —É—Ç–∏–ª–∏—Ç—ã


```

### –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ üåê

- OpenAPI 3.x

- –í—Å–µ HTTP –º–µ—Ç–æ–¥—ã (GET/POST/PUT/DELETE –∏ –¥—Ä.)

- –†–µ–∫—É—Ä—Å–∏–≤–Ω–æ–µ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏–µ $ref

- –ü–∞—Ä–∞–º–µ—Ç—Ä—ã –∑–∞–ø—Ä–æ—Å–∞, —Ç–µ–ª–æ –∑–∞–ø—Ä–æ—Å–∞, –æ—Ç–≤–µ—Ç—ã

- –ü—Ä–∏–º–µ—Ä—ã –∏ –æ–ø–∏—Å–∞–Ω–∏—è —Å—Ö–µ–º

- –ö–æ–º–±–∏–Ω–∞—Ç–æ—Ä—ã —Å—Ö–µ–º (anyOf/oneOf/allOf)

- Markdown-—Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Ç–∞–±–ª–∏—Ü –∏ –ø—Ä–∏–º–µ—Ä–æ–≤

