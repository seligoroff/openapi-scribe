# OpenAPI Scribe üñãÔ∏è

![Python](https://img.shields.io/badge/python-3.8+-blue.svg)
![Click](https://img.shields.io/badge/click-8.1+-green.svg)
![Jinja2](https://img.shields.io/badge/jinja2-3.1+-orange.svg)
![OpenAPI](https://img.shields.io/badge/OpenAPI-3.0+-brightgreen.svg)
![pytest](https://img.shields.io/badge/pytest-7.0+-purple.svg)
![License](https://img.shields.io/badge/license-MIT-blue.svg)

![Tests](https://img.shields.io/badge/tests-162%20passed-success)
![Coverage](https://img.shields.io/badge/coverage-87%25-brightgreen)

–£—Ç–∏–ª–∏—Ç–∞ –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å OpenAPI —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏—è–º–∏: –∏–∑–≤–ª–µ—á–µ–Ω–∏–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏, –≥–µ–Ω–µ—Ä–∞—Ü–∏—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏ –∏ –∞–Ω–∞–ª–∏–∑ —Å—Ö–µ–º

## –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏ ‚ú®

- –ü–æ–∏—Å–∫ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –ø–æ —ç–Ω–¥–ø–æ–∏–Ω—Ç–∞–º –∏ —Å—Ö–µ–º–∞–º –¥–∞–Ω–Ω—ã—Ö
- –ì–µ–Ω–µ—Ä–∞—Ü–∏—è Markdown –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏
- –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è —ç–Ω–¥–ø–æ–∏–Ω—Ç–æ–≤
- –ì—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∞ —ç–Ω–¥–ø–æ–∏–Ω—Ç–æ–≤ –ø–æ —Ç–µ–≥–∞–º
- –í—ã–≤–æ–¥ –∫—Ä–∞—Ç–∫–æ–≥–æ –æ–ø–∏—Å–∞–Ω–∏—è (summary) —ç–Ω–¥–ø–æ–∏–Ω—Ç–æ–≤
- –ü–æ–¥–¥–µ—Ä–∂–∫–∞ —Ä–µ–∫—É—Ä—Å–∏–≤–Ω–æ–≥–æ –≤—ã–≤–æ–¥–∞ –∑–∞–≤–∏—Å–∏–º—ã—Ö —Å—Ö–µ–º
- –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–∏–º–µ—Ä–æ–≤ –∏ —Ç–∞–±–ª–∏—Ü –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤
- –û–±—Ä–∞–±–æ—Ç–∫–∞ `$ref` –∏ –∫–æ–º–±–∏–Ω–∞—Ç–æ—Ä–æ–≤ —Å—Ö–µ–º (anyOf/oneOf/allOf)

## –£—Å—Ç–∞–Ω–æ–≤–∫–∞ ‚öôÔ∏è

1. –ö–ª–æ–Ω–∏—Ä—É–π—Ç–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π:

```bash
git clone git@github.com:seligoroff/openapi-scribe.git
cd openapi-scribe
```
2. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:

```bash

pip install -r requirements.txt

```
## –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ üöÄ

### –û—Å–Ω–æ–≤–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã

```bash 
python cli.py [COMMAND] [OPTIONS]

```

| –ö–æ–º–∞–Ω–¥–∞ |	–û–ø–∏—Å–∞–Ω–∏–µ |
|---------|----------|
|endpoint|	–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–º —ç–Ω–¥–ø–æ–∏–Ω—Ç–µ|
|schema|	–ü–æ–∏—Å–∫ —Å—Ö–µ–º—ã –¥–∞–Ω–Ω—ã—Ö –ø–æ –∏–º–µ–Ω–∏ –∏–ª–∏ —Å–ø–∏—Å–æ–∫ –≤—Å–µ—Ö —Å—Ö–µ–º (--list)|
|list|	–°–ø–∏—Å–æ–∫ –≤—Å–µ—Ö —ç–Ω–¥–ø–æ–∏–Ω—Ç–æ–≤ API (—Å –æ–ø—Ü–∏—è–º–∏ --summary, --group-by-tags, --stats)|
|errors-report|	–û—Ç—á–µ—Ç –ø–æ —ç–Ω–¥–ø–æ–∏–Ω—Ç–∞–º —Å –∫–æ–¥–∞–º–∏ –æ—à–∏–±–æ–∫ (4xx, 5xx)|
|generate-md|	–ì–µ–Ω–µ—Ä–∞—Ü–∏—è Markdown –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏|

#### 1. –ü–æ–∏—Å–∫ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ–± —ç–Ω–¥–ø–æ–∏–Ω—Ç–µ

```bash
python cli.py endpoint \
  -s path/to/openapi.json \
  -p /api/v1/users \
  -m get

```  

**–û–ø—Ü–∏–∏:**

- --spec/-s: –ü—É—Ç—å –∫ OpenAPI —Ñ–∞–π–ª—É (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ)

- --path/-p: –ü—É—Ç—å —ç–Ω–¥–ø–æ–∏–Ω—Ç–∞ (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ)

- --method/-m: HTTP –º–µ—Ç–æ–¥ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é: get)

- --expand-schemas: –†–µ–∫—É—Ä—Å–∏–≤–Ω—ã–π –≤—ã–≤–æ–¥ —Å–≤—è–∑–∞–Ω–Ω—ã—Ö —Å—Ö–µ–º

#### 2. –ü–æ–∏—Å–∫ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ —Å—Ö–µ–º–µ

```bash
python cli.py schema \
  -s path/to/openapi.json \
  -n UserSchema

```

**–û–ø—Ü–∏–∏:**

- --spec/-s: –ü—É—Ç—å –∫ OpenAPI —Ñ–∞–π–ª—É (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ)
- --name/-n: –ò–º—è —Å—Ö–µ–º—ã –¥–ª—è –ø–æ–∏—Å–∫–∞ (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ, –µ—Å–ª–∏ –Ω–µ —É–∫–∞–∑–∞–Ω --list)
- --list/-l: –ü–æ–∫–∞–∑–∞—Ç—å —Å–ø–∏—Å–æ–∫ –≤—Å–µ—Ö –¥–æ—Å—Ç—É–ø–Ω—ã—Ö —Å—Ö–µ–º (–∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–∞ --name)

**–ü—Ä–∏–º–µ—Ä—ã:**

```bash
# –ü–æ–∏—Å–∫ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–π —Å—Ö–µ–º—ã
python cli.py schema -s spec.json -n UserSchema

# –°–ø–∏—Å–æ–∫ –≤—Å–µ—Ö –¥–æ—Å—Ç—É–ø–Ω—ã—Ö —Å—Ö–µ–º
python cli.py schema -s spec.json --list
```

#### 3. –°–ø–∏—Å–æ–∫ –≤—Å–µ—Ö —ç–Ω–¥–ø–æ–∏–Ω—Ç–æ–≤

```bash
python cli.py list \
  -s path/to/openapi.json \
  -o endpoints.txt \
  --summary \
  --group-by-tags \
  --stats

```

**–û–ø—Ü–∏–∏:**

- --spec/-s: –ü—É—Ç—å –∫ OpenAPI —Ñ–∞–π–ª—É (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ)
- --output/-o: –§–∞–π–ª –¥–ª—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
- --summary: –ü–æ–∫–∞–∑–∞—Ç—å –∫—Ä–∞—Ç–∫–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ (summary) –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —ç–Ω–¥–ø–æ–∏–Ω—Ç–∞
- --group-by-tags: –ì—Ä—É–ø–ø–∏—Ä–æ–≤–∞—Ç—å —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã –ø–æ —Ç–µ–≥–∞–º
- --stats: –ü–æ–∫–∞–∑–∞—Ç—å —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É –ø–æ API (–∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —ç–Ω–¥–ø–æ–∏–Ω—Ç–æ–≤, –º–µ—Ç–æ–¥—ã, –≤–µ—Ä—Å–∏–∏ –∏ —Ç.–¥.)

**–ü—Ä–∏–º–µ—Ä—ã:**

```bash
# –ü—Ä–æ—Å—Ç–æ–π —Å–ø–∏—Å–æ–∫
python cli.py list -s spec.json

# –° –∫—Ä–∞—Ç–∫–∏–º –æ–ø–∏—Å–∞–Ω–∏–µ–º
python cli.py list -s spec.json --summary

# –ì—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∞ –ø–æ —Ç–µ–≥–∞–º
python cli.py list -s spec.json --group-by-tags

# –ì—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∞ —Å –æ–ø–∏—Å–∞–Ω–∏–µ–º
python cli.py list -s spec.json --group-by-tags --summary

# –¢–æ–ª—å–∫–æ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞
python cli.py list -s spec.json --stats

# –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ —Å –≥—Ä—É–ø–ø–∏—Ä–æ–≤–∫–æ–π –ø–æ —Ç–µ–≥–∞–º
python cli.py list -s spec.json --stats --group-by-tags
```

#### 4. –û—Ç—á–µ—Ç –ø–æ –∫–æ–¥–∞–º –æ—à–∏–±–æ–∫ —ç–Ω–¥–ø–æ–∏–Ω—Ç–æ–≤

```bash
python cli.py errors-report \
  -s path/to/openapi.json \
  -o report.txt \
  --format text
```

**–û–ø—Ü–∏–∏:**

- --spec/-s: –ü—É—Ç—å –∫ OpenAPI —Ñ–∞–π–ª—É (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ)
- --output/-o: –§–∞–π–ª –¥–ª—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –æ—Ç—á–µ—Ç–∞ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
- --format/-f: –§–æ—Ä–º–∞—Ç –æ—Ç—á–µ—Ç–∞ (text, csv –∏–ª–∏ md, –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é: text)

**–ü—Ä–∏–º–µ—Ä—ã:**

```bash
# –¢–µ–∫—Å—Ç–æ–≤—ã–π –æ—Ç—á–µ—Ç –≤ –∫–æ–Ω—Å–æ–ª—å
python cli.py errors-report -s spec.json

# –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –æ—Ç—á–µ—Ç–∞ –≤ —Ñ–∞–π–ª
python cli.py errors-report -s spec.json -o errors_report.txt

# CSV —Ñ–æ—Ä–º–∞—Ç
python cli.py errors-report -s spec.json --format csv -o errors_report.csv

# Markdown —Ñ–æ—Ä–º–∞—Ç
python cli.py errors-report -s spec.json --format md -o errors_report.md
```

**–û–ø–∏—Å–∞–Ω–∏–µ:**

–ö–æ–º–∞–Ω–¥–∞ –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç –æ—Ç—á–µ—Ç, –∫–æ—Ç–æ—Ä—ã–π –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —ç–Ω–¥–ø–æ–∏–Ω—Ç–∞ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç:
- –ü—É—Ç—å —ç–Ω–¥–ø–æ–∏–Ω—Ç–∞
- HTTP –º–µ—Ç–æ–¥
- –ö–æ–¥—ã –æ—à–∏–±–æ–∫ (4xx, 5xx) –∏–∑ —Å–µ–∫—Ü–∏–∏ `responses`

–£–¥–æ–±–Ω–æ –¥–ª—è —Å–≤–µ—Ä–∫–∏ —Å –∫–æ–¥–æ–º –∏ –ø—Ä–æ–≤–µ—Ä–∫–∏ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏ –æ—à–∏–±–æ–∫.

#### 5. –ì–µ–Ω–µ—Ä–∞—Ü–∏—è Markdown –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏

```bash

python cli.py generate-md \
  -s path/to/openapi.json \
  -e endpoints.txt \
  -o documentation.md \
  --all-schemas

  ```
  **–û–ø—Ü–∏–∏:**

  - --spec/-s: –ü—É—Ç—å –∫ OpenAPI —Ñ–∞–π–ª—É (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ)

- --endpoints/-e: –§–∏–ª—å—Ç—Ä —ç–Ω–¥–ø–æ–∏–Ω—Ç–æ–≤ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

- --output/-o: –§–∞–π–ª –≤—ã–≤–æ–¥–∞ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

- --all-schemas: –í–∫–ª—é—á–∏—Ç—å –≤—Å–µ —Å—Ö–µ–º—ã (–Ω–µ —Ç–æ–ª—å–∫–æ –∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ)

### –ü—Ä–∏–º–µ—Ä—ã —Ä–∞–±–æ—Ç—ã üìù

#### –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è —ç–Ω–¥–ø–æ–∏–Ω—Ç–æ–≤

–§–∞–π–ª endpoints.txt:

```bash 
GET /api/v1/users
POST /api/v1/posts

```

–ì–µ–Ω–µ—Ä–∞—Ü–∏—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏ —Ç–æ–ª—å–∫–æ –¥–ª—è —É–∫–∞–∑–∞–Ω–Ω—ã—Ö —ç–Ω–¥–ø–æ–∏–Ω—Ç–æ–≤:

```bash

python cli.py generate-md \
  -s spec/openapi.json \
  -e endpoints.txt \
  -o filtered_docs.md

```

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞ üìÇ

```bash

.
‚îú‚îÄ‚îÄ cli.py                    # –û—Å–Ω–æ–≤–Ω–æ–π CLI-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å
‚îú‚îÄ‚îÄ README.md                 # –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
‚îú‚îÄ‚îÄ requirements.txt          # –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
‚îú‚îÄ‚îÄ pytest.ini               # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è pytest
‚îú‚îÄ‚îÄ .coveragerc              # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è coverage
‚îú‚îÄ‚îÄ domain/                  # –î–æ–º–µ–Ω–Ω—ã–π —Å–ª–æ–π (–±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞)
‚îÇ   ‚îú‚îÄ‚îÄ models.py           # Value objects (OpenAPISpec, Endpoint, Schema)
‚îÇ   ‚îî‚îÄ‚îÄ services.py         # –î–æ–º–µ–Ω–Ω—ã–µ —Å–µ—Ä–≤–∏—Å—ã (EndpointFinder, SchemaResolver)
‚îú‚îÄ‚îÄ ports/                   # –ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã (–ø–æ—Ä—Ç—ã)
‚îÇ   ‚îî‚îÄ‚îÄ spec_loader.py      # SpecLoader (ABC)
‚îú‚îÄ‚îÄ adapters/                # –†–µ–∞–ª–∏–∑–∞—Ü–∏–∏ –ø–æ—Ä—Ç–æ–≤
‚îÇ   ‚îî‚îÄ‚îÄ input/              # –í—Ö–æ–¥—è—â–∏–µ –∞–¥–∞–ø—Ç–µ—Ä—ã
‚îÇ       ‚îú‚îÄ‚îÄ file_spec_loader.py
‚îÇ       ‚îî‚îÄ‚îÄ endpoints_filter_loader.py
‚îú‚îÄ‚îÄ application/             # Use cases (–±–∏–∑–Ω–µ—Å-–æ–ø–µ—Ä–∞—Ü–∏–∏)
‚îÇ   ‚îî‚îÄ‚îÄ use_cases/
‚îÇ       ‚îú‚îÄ‚îÄ get_endpoint_info.py
‚îÇ       ‚îú‚îÄ‚îÄ get_schema_info.py
‚îÇ       ‚îú‚îÄ‚îÄ list_endpoints.py
‚îÇ       ‚îî‚îÄ‚îÄ generate_documentation.py
‚îú‚îÄ‚îÄ rendering/               # –†–µ–Ω–¥–µ—Ä–∏–Ω–≥ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏
‚îÇ   ‚îú‚îÄ‚îÄ formatters.py       # –§–æ—Ä–º–∞—Ç—Ç–µ—Ä—ã (TypeFormatter, ExampleFormatter)
‚îÇ   ‚îú‚îÄ‚îÄ markdown.py         # MarkdownGenerator
‚îÇ   ‚îî‚îÄ‚îÄ templates/          # Jinja2 —à–∞–±–ª–æ–Ω—ã
‚îî‚îÄ‚îÄ tests/                   # –¢–µ—Å—Ç—ã
    ‚îú‚îÄ‚îÄ conftest.py
    ‚îú‚îÄ‚îÄ fixtures/
    ‚îî‚îÄ‚îÄ test_*.py


```

### –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ üåê

- OpenAPI 3.x

- –í—Å–µ HTTP –º–µ—Ç–æ–¥—ã (GET/POST/PUT/DELETE –∏ –¥—Ä.)

- –†–µ–∫—É—Ä—Å–∏–≤–Ω–æ–µ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏–µ $ref

- –ü–∞—Ä–∞–º–µ—Ç—Ä—ã –∑–∞–ø—Ä–æ—Å–∞, —Ç–µ–ª–æ –∑–∞–ø—Ä–æ—Å–∞, –æ—Ç–≤–µ—Ç—ã

- –ü—Ä–∏–º–µ—Ä—ã –∏ –æ–ø–∏—Å–∞–Ω–∏—è —Å—Ö–µ–º

- –ö–æ–º–±–∏–Ω–∞—Ç–æ—Ä—ã —Å—Ö–µ–º (anyOf/oneOf/allOf)

- Markdown-—Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Ç–∞–±–ª–∏—Ü –∏ –ø—Ä–∏–º–µ—Ä–æ–≤

## –õ–∏—Ü–µ–Ω–∑–∏—è üìÑ

–≠—Ç–æ—Ç –ø—Ä–æ–µ–∫—Ç —Ä–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω—è–µ—Ç—Å—è –ø–æ–¥ –ª–∏—Ü–µ–Ω–∑–∏–µ–π MIT. –ü–æ–¥—Ä–æ–±–Ω–æ—Å—Ç–∏ —Å–º. –≤ —Ñ–∞–π–ª–µ [LICENSE](LICENSE).

